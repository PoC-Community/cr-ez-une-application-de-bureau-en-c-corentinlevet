<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="using:TodoListApp.Models"
        x:Class="TodoListApp.MainWindow"
        Title="âœ¨ TaskMaster Pro"
        Width="1280" 
        Height="720"
        Background="#F5F7FA">

    <Border Background="White" 
            CornerRadius="20" 
            Margin="15"
            BoxShadow="0 10 30 0 #20000000"
            Padding="20">
        <Grid RowDefinitions="Auto,*,Auto" RowSpacing="15">
            
            <!-- Header avec gradient -->
            <Border Grid.Row="0"
                    CornerRadius="15"
                    Padding="20"
                    BoxShadow="0 4 15 0 #30000000">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
                        <GradientStop Color="#4A90E2" Offset="0"/>
                        <GradientStop Color="#357ABD" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="20">
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="âœ¨ TaskMaster Pro" 
                                   FontSize="26" 
                                   FontWeight="Bold"
                                   Foreground="White"/>
                        <TextBlock Text="Organize your life with style" 
                                   FontSize="12" 
                                   Foreground="#E8F4F8"
                                   Margin="0,3,0,0"/>
                    </StackPanel>
                    
                    <!-- Status dans le header -->
                    <Border Grid.Column="1"
                            Background="#FFFFFF30"
                            CornerRadius="8"
                            Padding="15,8"
                            VerticalAlignment="Center">
                        <TextBlock x:Name="StatusText" 
                                   Text="Ready to organize!" 
                                   Foreground="White"
                                   FontSize="12"
                                   FontWeight="Medium"/>
                    </Border>
                </Grid>
            </Border>

            <!-- Contenu principal en 2 colonnes -->
            <Grid Grid.Row="1" ColumnDefinitions="380,*" ColumnSpacing="20">
                
                <!-- Colonne gauche: Ajout et filtres -->
                <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="15">
                    
                    <!-- Carte d'ajout de tÃ¢che -->
                    <Border Background="White"
                            CornerRadius="12"
                            Padding="18"
                            BoxShadow="0 2 8 0 #15000000">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âž• Add New Task" 
                                       FontSize="14" 
                                       FontWeight="SemiBold"
                                       Foreground="#2C3E50"
                                       Margin="0,0,0,5"/>
                            
                            <TextBox x:Name="TaskInput" 
                                     Watermark="What needs to be done?"/>
                            
                            <TextBox x:Name="TagsInput" 
                                     Watermark="ðŸ·ï¸ Tags (work, urgent...)"/>

                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="ðŸ“…" 
                                           FontSize="16"
                                           VerticalAlignment="Center"/>
                                <DatePicker x:Name="DueDatePicker" 
                                            HorizontalAlignment="Stretch"
                                            Width="280"/>
                            </StackPanel>

                            <Button x:Name="AddButton" 
                                    Content="âž• Add Task" 
                                    HorizontalAlignment="Stretch"
                                    Height="38"
                                    FontSize="13"/>
                        </StackPanel>
                    </Border>

                    <!-- Filtres rapides -->
                    <Border Background="White"
                            CornerRadius="12"
                            Padding="15"
                            BoxShadow="0 2 8 0 #15000000">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âš¡ Quick Filters" 
                                       FontSize="13" 
                                       FontWeight="SemiBold"
                                       Foreground="#2C3E50"
                                       Margin="0,0,0,5"/>
                            
                            <Button x:Name="TodayFilterButton" 
                                    Content="ðŸ“… Today" 
                                    Classes="secondary"
                                    HorizontalAlignment="Stretch"
                                    Height="35"/>
                            <Button x:Name="WeekFilterButton" 
                                    Content="ðŸ“† This Week" 
                                    Classes="secondary"
                                    HorizontalAlignment="Stretch"
                                    Height="35"/>
                            <Button x:Name="OverdueFilterButton" 
                                    Content="âš ï¸ Overdue" 
                                    Classes="danger"
                                    HorizontalAlignment="Stretch"
                                    Height="35"/>

                            <Separator Height="1" Background="#E8EEF5" Margin="0,5"/>

                            <TextBox x:Name="TagFilterInput" 
                                     Watermark="Search by tag..."/>
                            <Grid ColumnDefinitions="*,*">
                                <Button x:Name="FilterButton" 
                                        Content="ðŸ” Filter" 
                                        Grid.Column="0"
                                        Height="35"
                                        Margin="0,0,4,0"/>
                                <Button x:Name="ClearFilterButton" 
                                        Content="âœ–ï¸ Clear" 
                                        Classes="secondary"
                                        Height="35"
                                        Grid.Column="1"
                                        Margin="4,0,0,0"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Actions -->
                    <Border Background="White"
                            CornerRadius="12"
                            Padding="15"
                            BoxShadow="0 2 8 0 #15000000">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âš™ï¸ Actions" 
                                       FontSize="13" 
                                       FontWeight="SemiBold"
                                       Foreground="#2C3E50"
                                       Margin="0,0,0,5"/>
                            
                            <Button x:Name="CompleteAllButton" 
                                    Content="âœ“ Complete All" 
                                    Classes="success"
                                    Height="35"
                                    HorizontalAlignment="Stretch"/>
                            <Button x:Name="ClearCompletedButton" 
                                    Content="ðŸ—‘ï¸ Clear Completed" 
                                    Classes="secondary"
                                    Height="35"
                                    HorizontalAlignment="Stretch"/>
                            <Button x:Name="DeleteButton" 
                                    Content="âŒ Delete Selected" 
                                    Classes="danger"
                                    Height="35"
                                    HorizontalAlignment="Stretch"/>
                            <Button x:Name="SaveButton" 
                                    Content="ðŸ’¾ Save Now"
                                    Height="35"
                                    HorizontalAlignment="Stretch"/>
                        </StackPanel>
                    </Border>
                    
                </StackPanel>
                </ScrollViewer>

                <!-- Colonne droite: Liste des tÃ¢ches -->
                <Border Grid.Column="1"
                        Background="White"
                        CornerRadius="12"
                        Padding="20"
                        BoxShadow="0 2 8 0 #15000000">
                    <Grid RowDefinitions="Auto,*">
                        <TextBlock Grid.Row="0"
                                   Text="ðŸ“‹ Your Tasks" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="#2C3E50"
                                   Margin="0,0,0,15"/>
                        
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <ListBox x:Name="TaskList" 
                                     DoubleTapped="OnTaskListDoubleTapped"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     SelectionMode="Single">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel/>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemTemplate>
                                    <DataTemplate DataType="models:TaskItem">
                                        <Border x:Name="TaskCardRoot">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding IsCompleted}" 
                                                              Margin="0,0,12,0"
                                                              VerticalAlignment="Center"/>
                                                    <TextBlock Text="{Binding Title}" 
                                                               FontSize="15"
                                                               FontWeight="SemiBold"
                                                               Foreground="#2C3E50"
                                                               VerticalAlignment="Center"
                                                               TextWrapping="Wrap"/>
                                                </StackPanel>
                                                
                                                <!-- Tags et dates sur la mÃªme ligne -->
                                                <StackPanel Orientation="Horizontal" 
                                                            Margin="30,8,0,0"
                                                            Spacing="8">
                                                    <!-- Tags -->
                                                    <Border Background="#E8F4F8"
                                                            CornerRadius="6"
                                                            Padding="8,4"
                                                            IsVisible="{Binding Tags, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                                                        <StackPanel Orientation="Horizontal" Spacing="5">
                                                            <TextBlock Text="ðŸ·ï¸" FontSize="12"/>
                                                            <TextBlock Text="{Binding Tags}" 
                                                                       Foreground="#4A90E2" 
                                                                       FontSize="12"
                                                                       FontWeight="Medium"/>
                                                        </StackPanel>
                                                    </Border>
                                                    
                                                    <!-- Date -->
                                                    <Border Background="#FFF3E0"
                                                            CornerRadius="6"
                                                            Padding="8,4"
                                                            IsVisible="{Binding DueDate, Converter={x:Static ObjectConverters.IsNotNull}}">
                                                        <StackPanel Orientation="Horizontal" Spacing="5">
                                                            <TextBlock Text="ðŸ“…" FontSize="12"/>
                                                            <TextBlock Text="{Binding DueDate, StringFormat='dd/MM/yyyy'}" 
                                                                       Foreground="#F57C00"
                                                                       FontSize="12"
                                                                       FontWeight="Medium"/>
                                                        </StackPanel>
                                                    </Border>
                                                    
                                                    <!-- Overdue badge -->
                                                    <Border Background="#FFEBEE"
                                                            CornerRadius="6"
                                                            Padding="8,4"
                                                            IsVisible="{Binding IsOverdue}">
                                                        <StackPanel Orientation="Horizontal" Spacing="5">
                                                            <TextBlock Text="âš ï¸" FontSize="12"/>
                                                            <TextBlock Text="OVERDUE" 
                                                                       Foreground="#E74C3C" 
                                                                       FontWeight="Bold"
                                                                       FontSize="11"/>
                                                        </StackPanel>
                                                    </Border>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                <ListBox.ItemContainerTheme>
                                    <ControlTheme TargetType="ListBoxItem" x:DataType="models:TaskItem">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0,0,0,10"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        
                                        <Style Selector="^:pointerover /template/ ContentPresenter#PART_ContentPresenter">
                                            <Setter Property="Background" Value="Transparent"/>
                                        </Style>
                                        <Style Selector="^:selected /template/ ContentPresenter#PART_ContentPresenter">
                                            <Setter Property="Background" Value="Transparent"/>
                                        </Style>
                                    </ControlTheme>
                                </ListBox.ItemContainerTheme>
                            </ListBox>
                        </ScrollViewer>
                    </Grid>
                </Border>
                
            </Grid>

            <!-- Footer minimaliste -->
            <Border Grid.Row="2"
                    Background="#F0F4F8"
                    Padding="15,8"
                    CornerRadius="10">
                <TextBlock Text="ðŸ’¡ Double-click a task to edit â€¢ Auto-save enabled" 
                           Foreground="#7F8C8D"
                           FontSize="11"
                           HorizontalAlignment="Center"/>
            </Border>
            
        </Grid>
    </Border>
</Window>
